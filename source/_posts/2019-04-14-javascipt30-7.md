title: Vanilla JS 30
date: 2019-04-14
tags: [vanilla javascript]
categories:
- [TIL, javascript, javascipt30]
banner: https://javascript30.com/images/JS3-social-share.png

---

30 Day Vanilla JS Coding Challenge Study - 7ì£¼ì°¨

- How JavaScript's Array Reduce Works
- Unreal Webcam Fun with getUserMedia() and HTML5 Canvas
- Speech Recognition

<!-- more -->

![](http://i3.ytimg.com/vi/SadWPo2KZWg/maxresdefault.jpg)
# 18. How JavaScript's Array Reduce Works
ì˜ìƒ: <https://youtu.be/SadWPo2KZWg>

`reduce` ë©”ì„œë“œì˜ í™œìš© ë°©ë²•

```js
// data-* ë¥¼ ì´ìš©í•´ ì…€ë ‰íŒ… í›„ ë°°ì—´ ë©”ì„œë“œ í™œìš©ì„ ìœ„í•´ Array.from() ì‚¬ìš©
const timeNodes = Array.from(document.querySelectorAll('[data-time]'));

// mapì„ í†µí•´ ë°ì´í„°ë¥¼ ê°€ê³µ í›„ reduceë¥¼ í†µí•´ ëˆ„ì ê°’ í™œìš©
const seconds = timeNodes
  .map(node => node.dataset.time)
  .map(timeCode => {
    const [mins, secs] = timeCode.split(':').map(parseFloat);
    return (mins * 60) + secs;
  })
  .reduce((total, vidSeconds) => total + vidSeconds);

  let secondsLeft = seconds;
  const hours = Math.floor(secondsLeft / 3600);
  secondsLeft = secondsLeft % 3600;

  const mins = Math.floor(secondsLeft / 60);
  secondsLeft = secondsLeft % 60;

  console.log(hours, mins, secondsLeft);
```

---

![](http://i3.ytimg.com/vi/ElWFcBlVk-o/maxresdefault.jpg)
# 19. Unreal Webcam Fun with getUserMedia() and HTML5 Canvas
ì˜ìƒ: <https://youtu.be/ElWFcBlVk-o>

`getUserMedia()`ì™€ HTML5 ìº”ë²„ìŠ¤ë¥¼ í™œìš©

```js
// getUserMedia()ë¥¼ í†µí•œ ì ‘ê·¼
function getVideo() {
  navigator.mediaDevices.getUserMedia({ video: true, audio: false })
    .then(localMediaStream => {
      video.srcObject = localMediaStream;
      video.play();
    })
    .catch(err => {
      console.error(`OH NO!!!`, err);
    });
}

// canplay ì´ë²¤íŠ¸ íƒ€ì…ì€ ë¹„ë””ì˜¤ë¥¼ ì¬ìƒí•  ìˆ˜ ìˆì„ ë•Œ íŠ¸ë¦¬ê±° ëœë‹¤
video.addEventListener('canplay', paintToCanvas);
```

ì´ì™¸ì— ë¡œì§ì€ RGB ê°’ ë° ìº”ë²„ìŠ¤ ì¡°ì‘ê³¼ `takePhoto()` í•¨ìˆ˜ë¥¼ í†µí•œ ë¡œì§

---

![](http://i3.ytimg.com/vi/0mJC0A72Fnw/maxresdefault.jpg)
# 20. Speech Recognition
ì˜ìƒ: <https://youtu.be/0mJC0A72Fnw>

[Web Speech API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API)ë¥¼ í™œìš©í•œ ìŒì„±ì¸ì‹

```js
window.SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

const recognition = new SpeechRecognition();
// ì¤‘ê°„ê²°ê³¼ ë°˜í™˜ ì—¬ë¶€ (ê¸°ë³¸ê°’ì€ false)
recognition.interimResults = true;
recognition.lang = 'en-US';

let p = document.createElement('p');
const words = document.querySelector('.words');
words.appendChild(p);

recognition.addEventListener('result', e => {
  const transcript = Array.from(e.results)
    .map(result => result[0])
    .map(result => result.transcript)
    .join('');

    // ìŒì„± ì¸ì‹ ì¤‘ ì§€ì •ëœ ë‹¨ì–´ëŠ” 'ğŸ’©'ìœ¼ë¡œ ëŒ€ì²´
    const poopScript = transcript.replace(/poop|poo|shit|dump/gi, 'ğŸ’©');
    p.textContent = poopScript;

    if (e.results[0].isFinal) {
      p = document.createElement('p');
      words.appendChild(p);
    }
});

// ìŒì„± ì¸ì‹ì´ ëë‚˜ê±°ë‚˜ ì¢…ë£Œë˜ì—ˆì„ë•Œ
recognition.addEventListener('end', recognition.start);

recognition.start();
```